# ç®€å•é—®å·è°ƒæŸ¥ç½‘ç«™

ä¸€ä¸ªåŸºäºNode.js + Express + SQLiteçš„å®Œæ•´é—®å·è°ƒæŸ¥ç³»ç»Ÿï¼Œæä¾›ç”¨æˆ·æ³¨å†Œã€é—®å·ç®¡ç†ã€é—®å·å¡«å†™ã€ç»“æœåˆ†æç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- âœ… **é—®å·ç®¡ç†** - åˆ›å»ºã€ç¼–è¾‘ã€æ¿€æ´»/åœç”¨é—®å·
- âœ… **ç”Ÿæ•ˆæ—¶é—´æ§åˆ¶** - è®¾ç½®é—®å·å¼€å§‹å’Œç»“æŸæ—¶é—´
- âœ… **å¤šç§é¢˜å‹æ”¯æŒ** - å•è¡Œæ–‡æœ¬ã€å¤šè¡Œæ–‡æœ¬ã€å•é€‰ã€å¤šé€‰ã€ä¸‹æ‹‰é€‰æ‹©
- âœ… **é—®å·å¡«å†™** - ç®€æ´çš„é—®å·å¡«å†™ç•Œé¢
- âœ… **ç»“æœç»Ÿè®¡** - å›ç­”æ•°æ®æ±‡æ€»å’Œåˆ†æ
- âœ… **é‚®ä»¶é€šçŸ¥** - è‡ªåŠ¨å‘é€é—®å·ç»“æœåˆ°æŒ‡å®šé‚®ç®±
- âœ… **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- âœ… **ç®¡ç†åå°** - å®Œæ•´çš„é—®å·ç®¡ç†ç•Œé¢

## æŠ€æœ¯æ ˆ

**åç«¯ï¼š**
- Node.js + Express
- SQLite æ•°æ®åº“
- JWT èº«ä»½è®¤è¯
- Nodemailer é‚®ä»¶å‘é€
- bcrypt å¯†ç åŠ å¯†

**å‰ç«¯ï¼š**
- åŸç”Ÿ HTML + CSS + JavaScript
- å“åº”å¼è®¾è®¡
- ç°ä»£åŒ–UIç»„ä»¶

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

**ğŸš€ ç°åœ¨å·²éƒ¨ç½²åˆ°Vercel + Neon PostgreSQLï¼**

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run init-db
```

### 3. é…ç½®é‚®ä»¶æœåŠ¡ï¼ˆå¯é€‰ï¼‰

åœ¨ç¯å¢ƒå˜é‡æˆ–ç›´æ¥ä¿®æ”¹ `server/app.js` ä¸­çš„é‚®ä»¶é…ç½®ï¼š

```javascript
const transporter = nodemailer.createTransporter({
  service: 'gmail', // æˆ–å…¶ä»–é‚®ä»¶æœåŠ¡
  auth: {
    user: 'your-email@gmail.com',
    pass: 'your-email-password'
  }
});
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

è®¿é—® http://localhost:3000

## é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·

- **ç”¨æˆ·åï¼š** admin
- **å¯†ç ï¼š** admin123

## é¡¹ç›®ç»“æ„

```
SimpleSurvey/
â”œâ”€â”€ server/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app.js             # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”œâ”€â”€ init-db.js         # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â””â”€â”€ survey.db          # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ public/                # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css      # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ main.js        # ä¸»é¡µåŠŸèƒ½
â”‚   â”‚   â””â”€â”€ admin.js       # ç®¡ç†åå°
â”‚   â”œâ”€â”€ index.html         # é¦–é¡µ
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ register.html      # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ survey.html        # é—®å·å¡«å†™é¡µ
â”‚   â””â”€â”€ admin.html         # ç®¡ç†åå°
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## æ•°æ®åº“è®¾è®¡

### ç”¨æˆ·è¡¨ (users)
- id: ä¸»é”®
- username: ç”¨æˆ·å
- email: é‚®ç®±
- password: åŠ å¯†å¯†ç 
- is_admin: æ˜¯å¦ç®¡ç†å‘˜
- created_at: åˆ›å»ºæ—¶é—´

### é—®å·è¡¨ (surveys)
- id: ä¸»é”®
- title: é—®å·æ ‡é¢˜
- description: é—®å·æè¿°
- creator_id: åˆ›å»ºè€…ID
- is_active: æ˜¯å¦æ¿€æ´»
- start_date: å¼€å§‹æ—¶é—´
- end_date: ç»“æŸæ—¶é—´
- email_recipient: ç»“æœæ¥æ”¶é‚®ç®±
- created_at: åˆ›å»ºæ—¶é—´

### é—®é¢˜è¡¨ (questions)
- id: ä¸»é”®
- survey_id: é—®å·ID
- question_text: é—®é¢˜å†…å®¹
- question_type: é—®é¢˜ç±»å‹
- options: é€‰é¡¹ï¼ˆJSONæ ¼å¼ï¼‰
- is_required: æ˜¯å¦å¿…å¡«
- order_num: æ’åºå·

### å›ç­”è¡¨ (responses)
- id: ä¸»é”®
- survey_id: é—®å·ID
- respondent_name: å›ç­”è€…å§“å
- respondent_email: å›ç­”è€…é‚®ç®±
- submitted_at: æäº¤æ—¶é—´

### ç­”æ¡ˆè¡¨ (answers)
- id: ä¸»é”®
- response_id: å›ç­”ID
- question_id: é—®é¢˜ID
- answer_text: ç­”æ¡ˆå†…å®¹

## API æ¥å£

### è®¤è¯ç›¸å…³
- `POST /api/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/login` - ç”¨æˆ·ç™»å½•
- `POST /api/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### é—®å·ç›¸å…³
- `GET /api/surveys` - è·å–æ‰€æœ‰å¯ç”¨é—®å·
- `GET /api/surveys/:id` - è·å–å•ä¸ªé—®å·è¯¦æƒ…
- `POST /api/surveys/:id/submit` - æäº¤é—®å·ç­”æ¡ˆ

### ç®¡ç†å‘˜åŠŸèƒ½
- `GET /api/admin/surveys` - è·å–æ‰€æœ‰é—®å·ï¼ˆç®¡ç†å‘˜ï¼‰
- `POST /api/admin/surveys` - åˆ›å»ºæ–°é—®å·
- `PATCH /api/admin/surveys/:id/toggle` - æ¿€æ´»/åœç”¨é—®å·
- `GET /api/admin/surveys/:id/results` - è·å–é—®å·ç»“æœ

## ä½¿ç”¨è¯´æ˜

### æ™®é€šç”¨æˆ·
1. è®¿é—®é¦–é¡µæŸ¥çœ‹å¯ç”¨é—®å·
2. ç‚¹å‡»"å‚ä¸é—®å·"å¡«å†™é—®å·
3. æäº¤åç³»ç»Ÿè‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥

### ç®¡ç†å‘˜
1. ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·ç™»å½•
2. è¿›å…¥ç®¡ç†åå°åˆ›å»ºé—®å·
3. è®¾ç½®é—®å·æ ‡é¢˜ã€æè¿°ã€æœ‰æ•ˆæœŸç­‰
4. æ·»åŠ å„ç±»å‹é—®é¢˜å’Œé€‰é¡¹
5. æ¿€æ´»é—®å·ä¾›ç”¨æˆ·å¡«å†™
6. æŸ¥çœ‹é—®å·ç»“æœå’Œç»Ÿè®¡

## ç¯å¢ƒå˜é‡

```bash
PORT=3000                    # æœåŠ¡ç«¯å£
JWT_SECRET=your-secret-key   # JWTå¯†é’¥
EMAIL_USER=your-email        # é‚®ä»¶å‘é€è´¦æˆ·
EMAIL_PASS=your-password     # é‚®ä»¶å‘é€å¯†ç 
```

## éƒ¨ç½²å»ºè®®

1. ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹
2. é…ç½® Nginx åå‘ä»£ç†
3. è®¾ç½® HTTPS è¯ä¹¦
4. å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶

## è®¸å¯è¯

MIT License
